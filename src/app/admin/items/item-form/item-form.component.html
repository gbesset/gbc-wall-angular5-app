<div class="container">
    <h2>Ajout / Modification Item</h2>

	<br>
	<button type="button" class="btn btn-primary" (click)="newItem(); itemPictureForm.reset(); itemVideoForm.reset();">Nouvel Item</button>
	<br>

<div>
	
  <tabset>
    <tab heading="Photos" id="tabPicture" (select)="setPicture();">
	    <!-- Formulaire disparait une fois valid et soumis -->
		<div [hidden]="submitted">
			<form (ngSubmit)="onSubmit()" #itemPictureForm="ngForm">
		    	
    			<div *ngIf="isItemCreation;then displayDropzone else displayImage">check item id</div>

    				<div class="row">
				
							<div *ngIf="item.id!==undefined" class="col-4">
			    			 	<img src="http://via.placeholder.com/350x250"/>
			    			</div>
			    		
							<div *ngIf="item.id===undefined" class="col-8">
			    			 	<div id="dropzone" style="border-style: dashed;"><br><br></div>
			    			</div>
	
			    		<div class="col-6">
			    		
					      <div class="form-group">
					        <label for="description">Description</label>
					        <input type="text" class="form-control" id="description" required [(ngModel)]="item.description" name="description" #descriptionPicture="ngModel" >
					        <div [hidden]="descriptionPicture.valid || descriptionPicture.pristine" class="alert alert-danger">
						  		La description est requise
							</div>
					      </div>

						  <div class="form-group">
					        <label for="createdAt">Date</label>
					        <input type="text" >{{item.createdAt| date : format : timezone}}
						  </div>

					      <div class="form-group">
					        <label for="path">Chemin</label>
					        <input type="text" class="form-control" id="path"  [(ngModel)]="item.path" name="path">
					      </div>

						  <div class="form-group">
						    <label for="power">Liste déroulante</label>
						    <select class="form-control" id="power" required>
						      <option *ngFor="let pow of powers" [value]="pow">{{pow}}</option>
						    </select>
						  </div>

					</div>
				</div>
			
				<div class="row justify-content-md-center">
						<button type="submit" class="btn btn-success" [disabled]="!itemPictureForm.form.valid">Sauvegarder</button>
				</div>
			 </form>
		</div>
	</tab>

	<tab heading="Vidéos" id="tabVideo" (select)="setVideo();">
		<div [hidden]="submitted">
			<form (ngSubmit)="onSubmit()" #itemVideoForm="ngForm">
		    	
		    	  <div class="form-group">
			        <label for="videoType">Vidéo sur....</label><br>
			       		<input type="radio" name="videoType" value="Youtube" (click)="onSelect('youtube')"> Youtube<br>
						<input type="radio" name="videoType" value="Vimeo" (click)="onSelect('vimeo')"> Vimeo<br>
			      </div>

			      <div class="form-group">
			        <label for="description">Description</label>
			        <input type="text" class="form-control" id="description" required [(ngModel)]="item.description" name="description" #descriptionVideo="ngModel">
			        <div [hidden]="descriptionVideo.valid || descriptionVideo.pristine" class="alert alert-danger">
				  		La description est requise
					</div>
			      </div>

			      <div class="form-group">
			        <label for="path">Chemin</label>
			        <input type="text" class="form-control" id="path"  [(ngModel)]="item.path" name="path">
			      </div>

				  <div class="form-group">
				    <label for="power">Liste déroulante</label>
				    <select class="form-control" id="power" required>
				      <option *ngFor="let pow of powers" [value]="pow">{{pow}}</option>
				    </select>
				 </div>
			
				<div class="row justify-content-md-center">
						<button type="submit" class="btn btn-success" [disabled]="!itemVideoForm.form.valid">Sauvegarder</button>
				</div>
			 </form>
		</div>
	</tab>
</tabset>

{{diagnostic}}

<!-- Si le est formulaire soumis, affiche des infos récapitulaives-->
	<div [hidden]="!submitted">
		  <h2>Nouvel Item ajouté</h2>
		  <div class="row">
		    <div class="col-xs-3">Description: </div>
		    <div class="col-xs-9  pull-left">{{ item.description }}</div>
		  </div>
		  <div class="row">
		    <div class="col-xs-3">Path: </div>
		    <div class="col-xs-9 pull-left">{{ item.path }}</div>
		  </div>
		  <div class="row">
		    <div class="col-xs-3">Power: </div>
		    <div class="col-xs-9 pull-left">{{ item.power }}</div>
		  </div>
		  <br>
		  <button class="btn btn-primary" (click)="submitted=false">Edit</button> 
		  <a routerLink="/admin/items"><button class="btn btn-primary" (click)="submitted=false">Items</button></a>
		</div>
</div>